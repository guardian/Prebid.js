(()=>{"use strict";function e(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}const t="auctionDebug",n="TRUE"===((r=window.location.search,r?r.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,r]=t.split("=");return/\[\]$/.test(n)?(n=n.replace("[]",""),e[n]=e[n]||[],e[n].push(r)):e[n]=r||"",e}),{}):{}).pbjs_debug||"").toUpperCase();var r;const i={},o="random",s={};s[o]=!0,s.fixed=!0;const c=o,d={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function a(e){const t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?{}:{priceGranularity:d.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:c,auctionOptions:{}};function n(e){return t[e]}function r(n,r){t.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0}),t[n]=r}const i={publisherDomain:{set(e){null!=e&&A("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),r("publisherDomain",e)}},priceGranularity:{set(e){a(e)&&("string"==typeof e?r("priceGranularity",o(e)?e:d.MEDIUM):$(e)&&(r("customPriceBucket",e),r("priceGranularity",d.CUSTOM),k("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set(e){null!=e&&r("mediaTypePriceGranularity",Object.keys(e).reduce(((t,r)=>(a(e[r])?"string"==typeof e?t[r]=o(e[r])?e[r]:n("priceGranularity"):$(e)&&(t[r]=e[r],k(`Using custom price granularity for ${r}`)):A(`Invalid price granularity for media type: ${r}`),t)),{}))}},bidderSequence:{set(e){s[e]?r("bidderSequence",e):A(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{set(e){(function(e){if(!$(e))return A("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t&&"suppressExpiredRender"!==t)return A(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!U(e[t]))return A(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(P))return A(`Auction Options ${t} must be only string`),!1}else if(("suppressStaleRender"===t||"suppressExpiredRender"===t)&&!S(e[t],h))return A(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&r("auctionOptions",e)}}};return Object.defineProperties(e,Object.fromEntries(Object.entries(i).map((e=>{let[i,o]=e;return[i,Object.assign({get:n.bind(null,i),set:r.bind(null,i),enumerable:t.hasOwnProperty(i),configurable:!t.hasOwnProperty(i)},o)]})))),e;function o(e){return n=t=>e===d[t],(t=Object.keys(d))&&t.find(n,undefined);var t,n}function a(e){if(!e)return B("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)o(e)||A("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if($(e)&&!function(e){if(t=e,!(t&&(U(t)||P(t)?t.length>0:!(Object.keys(t).length<=0))&&e.buckets&&Array.isArray(e.buckets)))return!1;var t;let n=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(n=!1)})),n}(e))return B("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}const u=function(){let t,r,o,s=[],c=null;function d(){t={};let e=a({debug:n,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:i}});r&&h(Object.keys(r).reduce(((t,n)=>(r[n]!==e[n]&&(t[n]=e[n]||{}),t)),{})),r=e,o={}}function u(){if(c&&o&&$(o[c])){let e=o[c];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(r).concat(Object.keys(e)))).reduce(((t,n)=>(void 0===e[n]?t[n]=r[n]:void 0===r[n]?t[n]=e[n]:$(e[n])?t[n]="customPriceBucket"===n?Object.assign({},r[n],e[n]):G({},r[n],e[n]):t[n]=e[n],t)),{})}return Object.assign({},r)}const[l,f]=[u,function(){const e=u();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((t=>function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){const n=arguments.length<=0?void 0:arguments[0];return n?e(t(),n):u()}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e="*",n=t||{}),"function"!=typeof r)return void B("listener must be a function");const i={topic:e,callback:r};return s.push(i),n.init&&r("*"===e?f():{[e]:f(e)}),function(){s.splice(s.indexOf(i),1)}}(...arguments)})),[g,b]=[f,l].map((e=>function(){let t=e(...arguments);return t&&"object"==typeof t&&(t=I(t)),t}));function p(e){if(!$(e))return void B("setConfig options must be an object");let n=Object.keys(e),i={};n.forEach((n=>{let o=e[n];$(t[n])&&$(o)&&(o=Object.assign({},t[n],o));try{i[n]=r[n]=o}catch(e){A(`Cannot set config for property ${n} : `,e)}})),h(i)}function h(e){const t=Object.keys(e);s.filter((e=>{return n=t,r=e.topic,n&&n.includes(r,undefined)||!1;var n,r})).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),s.filter((e=>"*"===e.topic)).forEach((t=>t.callback(e)))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!$(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!$(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((n=>{o[n]||(o[n]=a({},!1)),Object.keys(e.config).forEach((r=>{let i=e.config[r];const s=o[n][r];if($(i)&&(null==s||$(s))){const e=t?G:Object.assign;o[n][r]=e({},s||{},i)}else o[n][r]=i}))}))}catch(e){B(e)}}function m(e,t){c=e;try{return t()}finally{w()}}function w(){c=null}return d(),{getCurrentBidder:function(){return c},resetBidder:w,getConfig:f,getAnyConfig:l,readConfig:g,readAnyConfig:b,setConfig:p,mergeConfig:function(e){if(!$(e))return void B("mergeConfig input must be an object");const t=G(u(),e);return p({...t}),t},setDefaults:function(e){$(t)?(Object.assign(t,e),Object.assign(r,e)):B("defaults must be an object")},resetConfig:d,runWithBidder:m,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return m(e,t.bind(this,...r))}A("config.callbackWithBidder callback is not a function")}}},setBidderConfig:y,getBidderConfig:function(){return o},mergeBidderConfig:function(e){return y(e,!0)}}}();function l(e){var t,n,r;if(Array.isArray(e)){for(n=Array(t=e.length);t--;)n[t]=(r=e[t])&&"object"==typeof r?l(r):r;return n}if("[object Object]"===Object.prototype.toString.call(e)){for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:l(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=(r=e[t])&&"object"==typeof r?l(r):r;return n}return e}const f=window,g=f.pbjs=f.pbjs||{};g.cmd=g.cmd||[],g.que=g.que||[],f===window&&(f._pbjsGlobals=f._pbjsGlobals||[],f._pbjsGlobals.push("pbjs"));var b="String",p="Object",h="Boolean",y=Object.prototype.toString;let m,w=Boolean(window.console),v=Boolean(w&&window.console.log),O=(Boolean(w&&window.console.info),Boolean(w&&window.console.warn)),j=Boolean(w&&window.console.error);function E(){null!=m&&m(...arguments)}function k(){R()&&v&&console.log.apply(console,C(arguments,"MESSAGE:"))}function A(){R()&&O&&console.warn.apply(console,C(arguments,"WARNING:")),E(t,{type:"WARNING",arguments})}function B(){R()&&j&&console.error.apply(console,C(arguments,"ERROR:")),E(t,{type:"ERROR",arguments})}function C(e,t){e=[].slice.call(e);let n=u.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?`%c${n}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function R(){return!!u.getConfig("debug")}function S(e,t){return y.call(e)==="[object "+t+"]"}function P(e){return S(e,b)}const U=Array.isArray.bind(Array);function $(e){return S(e,p)}function I(e){return l(e)||{}}function x(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let n=0;return function(){n++,n===t&&e.apply(this,arguments)}}function D(e,t){let{checkTypes:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||n&&e.constructor!==t.constructor)return!1;{const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let i of r){if(!t.hasOwnProperty(i))return!1;if(!D(e[i],t[i],{checkTypes:n}))return!1}return!0}}function G(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if($(e)&&$(i))for(const t in i)$(i[t])?(e[t]||Object.assign(e,{[t]:{}}),G(e[t],i[t])):U(i[t])?e[t]?U(e[t])&&i[t].forEach((n=>{let r=1;for(let i=0;i<e[t].length;i++)if(D(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,{[t]:[...i[t]]}):Object.assign(e,{[t]:i[t]});return G(e,...n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n in e){const r=e[n],i=typeof r;if(void 0===r||"function"===i||"symbol"===i||r instanceof RegExp||r instanceof Map||r instanceof Set||r instanceof Date||null!==r&&"object"===i&&r.hasOwnProperty("toJSON"))return!0;if(null!==r&&"object"===i&&r.constructor===Object){if(t.has(r))return!0;if(t.add(r),_(r,t))return!0}}return!1}function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};({setTimeout:this.setTimeout=window.setTimeout.bind(window)}=e),this.logger=e.logger,this.rules=[]}let T,M;function N(e,t){let{hook:n,logger:r}=t;T=H.bind({overrides:e,logger:r}),n.get("addBidResponse").before(T,5),M=L.bind({overrides:e,logger:r}),n.get("addBidderRequests").before(M,5)}function W(e){let{hook:t}=e;t.get("addBidResponse").getHooks({hook:T}).remove(),t.get("addBidderRequests").getHooks({hook:M}).remove()}function K(e,t,n){return!(!e.bidder||e.bidder===t)||!(!e.adUnitCode||e.adUnitCode===n)}function Y(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function z(e,t,n,r){return Object.keys(e).filter((e=>-1===["adUnitCode","bidder"].indexOf(e))).reduce((function(t,i){return r.logMessage(`bidder overrides changed '${t.adUnitCode}/${t.bidderCode}' ${n}.${i} from '${t[i]}.js' to '${e[i]}'`),t[i]=e[i],t.isDebug=!0,t}),t)}function H(e,t,n,r){const{overrides:i,logger:o}=this;Y(i.bidders,n.bidderCode)?o.logWarn(`bidder '${n.bidderCode}' excluded from auction by bidder overrides`):(Array.isArray(i.bids)&&i.bids.forEach((function(e){K(e,n.bidderCode,t)||z(e,n,"bidder",o)})),e(t,n,r))}function L(e,t){const{overrides:n,logger:r}=this,i=t.filter((function(e){return!Y(n.bidders,e.bidderCode)||(r.logWarn(`bidRequest '${e.bidderCode}' excluded from auction by bidder overrides`),!1)}));Array.isArray(n.bidRequests)&&i.forEach((function(e){n.bidRequests.forEach((function(t){e.bids.forEach((function(n){K(t,e.bidderCode,n.adUnitCode)||z(t,n,"bidRequest",r)}))}))})),e(i)}Number.isInteger.bind(Number),Object.assign(q.prototype,{DEFAULT_RULE_OPTIONS:{delay:0},serializeConfig(t){return t.filter(((t,n)=>{const r=!_(t);return r||e(t,"options.suppressWarnings")||this.logger.logWarn(`Bid interceptor rule definition #${n+1} contains non-serializable properties and will be lost after a refresh. Rule definition: `,t),r}))},updateConfig(e){this.rules=(e.intercept||[]).map(((e,t)=>this.rule(e,t+1)))},rule(e,t){return{no:t,match:this.matcher(e.when,t),replace:this.replacer(e.then,t),options:Object.assign({},this.DEFAULT_RULE_OPTIONS,e.options),paapi:this.paapiReplacer(e.paapi||[],t)}},matcher(e,t){if("function"==typeof e)return e;if("object"!=typeof e)return this.logger.logError(`Invalid 'when' definition for debug bid interceptor (in rule #${t})`),()=>!1;function n(t,r){let{ref:i=e,args:o=[]}=r;return Object.entries(i).map((e=>{let[r,i]=e;const s=t[r];return i instanceof RegExp?null!=i.exec(s):"function"==typeof i?!!i(s,...o):"object"==typeof i?n(s,{ref:i,args:o}):s===i})).every((e=>e))}return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n(e,{args:r})}},replacer(e,t){var n=this;if(null===e)return()=>null;let r;return"function"==typeof(e=e||{})?r=t=>{let{args:n}=t;return e(...n)}:"object"!=typeof e?(this.logger.logError(`Invalid 'then' definition for debug bid interceptor (in rule #${t})`),r=()=>({})):r=t=>{let{args:n,ref:i=e}=t;const o=Array.isArray(i)?[]:{};return Object.entries(i).forEach((e=>{let[t,i]=e;o[t]="function"==typeof i?i(...n):null!=i&&"object"==typeof i?r({args:n,ref:i}):i})),o},function(e){const t=n.responseDefaults(e);for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return G(t,r({args:[e,...o]})),t.hasOwnProperty("ad")||t.hasOwnProperty("adUrl")||(t.ad=n.defaultAd(e,t)),t.isDebug=!0,t}},paapiReplacer(e,t){function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.keys(e).some((e=>!["config","igb"].includes(e)))?{config:e}:e))}return Array.isArray(e)?()=>n(e):"function"==typeof e?function(){return n(e(...arguments))}:void this.logger.logError(`Invalid 'paapi' definition for debug bid interceptor (in rule #${t})`)},responseDefaults:e=>({requestId:e.bidId,cpm:3.5764,currency:"EUR",width:300,height:250,ttl:360,creativeId:"mock-creative-id",netRevenue:!1,meta:{}}),defaultAd:(e,t)=>`<html><head><style>#ad {width: ${t.width}px;height: ${t.height}px;background-color: #f6f6ae;color: #85144b;padding: 5px;text-align: center;display: flex;flex-direction: column;align-items: center;justify-content: center;}#bidder {font-family: monospace;font-weight: normal;}#title {font-size: x-large;font-weight: bold;margin-bottom: 5px;}#body {font-size: large;margin-top: 5px;}</style></head><body><div id="ad"><div id="title">Mock ad: <span id="bidder">${e.bidder}</span></div><div id="body">${t.width}x${t.height}</div></div></body></html>`,match(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.rules.find((t=>t.match(e,...n)))},matchAll(e,t){const[n,r]=[[],[]];return e.forEach((e=>{const i=this.match(e,t);null!=i?n.push({rule:i,bid:e}):r.push(e)})),[n,r]},intercept(e){let{bids:t,bidRequest:n,addBid:r,addPaapiConfig:i,done:o}=e;null==t&&(t=n.bids);const[s,c]=this.matchAll(t,n);if(s.length>0){const e=x(o,s.length);s.forEach((t=>{const o=t.rule.replace(t.bid,n),s=t.rule.paapi(t.bid,n),c=t.rule.options.delay;this.logger.logMessage(`Intercepted bid request (matching rule #${t.rule.no}), mocking response in ${c}ms. Request, response, PAAPI configs:`,t.bid,o,s),this.setTimeout((()=>{o&&r(o,t.bid),s.forEach((e=>i(e,t.bid,n))),e()}),c)})),n=I(n),t=n.bids=c}else this.setTimeout(o,0);return{bids:t,bidRequest:n}}});const F=[];let J,Q=!1;function V(e,t){let{fromSession:n=!1,config:r,hook:i,logger:o}=t;r.setConfig({debug:!0}),J.updateConfig(e),X(!0),W({hook:i}),N(e,{hook:i,logger:o}),Q||(Q=!0,o.logMessage("Debug overrides enabled"+(n?" from session":"")))}function X(e){F.forEach((e=>{let[t,n]=e;t().getHooks({hook:n}).remove()})),e&&F.forEach((e=>{let[t,n]=e;t().before(n)}))}function Z(e,t){const n=function(){return J.intercept(...arguments)};F.push([e,function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,n,...i)}])}function ee(e,t,n,r,i,o,s,c){const d=x(c.onCompletion,2);({bids:r,bidRequest:i}=t({bids:r,bidRequest:i,addBid:s(c.onBid),addPaapiConfig:s(((e,t)=>c.onPaapi({bidId:t.bidId,...e}))),done:d})),0===r.length?(c.onResponse?.({}),d()):e(n,r,i,o,s,{...c,onCompletion:d})}function te(e){let{DEBUG_KEY:t,config:n,hook:r,createBid:i,logger:o}=e;J=new q({logger:o});const s=function(e){let{createBid:t}=e;return function(e,n,r,i,o,s){let c,{onResponse:d,onError:a,onBid:u,onFledge:l}=s;const f=x((()=>d(...c)),i.length+1);function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];c=t,f()}function b(e,n){u({adUnit:n.adUnitCode,bid:Object.assign(t(1,n),e)})}if((i=i.map((e=>n({bidRequest:e,addBid:b,addPaapiConfig(e,t,n){l({adUnitCode:t.adUnitCode,ortb2:n.ortb2,ortb2Imp:t.ortb2Imp,...e})},done:f}).bidRequest)).filter((e=>e.bids.length>0))).length>0){const t=new Set;i.forEach((e=>e.bids.forEach((e=>t.add(e.bidId))))),(r=I(r)).ad_units.forEach((e=>{e.bids=e.bids.filter((e=>t.has(e.bid_id)))})),r.ad_units=r.ad_units.filter((e=>e.bids.length>0)),e(r,i,o,{onResponse:g,onError:a,onBid:u})}else g(!0,[])}}({createBid:i});Z((()=>r.get("processBidderRequests")),ee),Z((()=>r.get("processPBSRequest")),s),function(e){let t,{DEBUG_KEY:n,storage:r,config:i,hook:o,logger:s}=e;try{r=r||window.sessionStorage,t=JSON.parse(r.getItem(n))}catch(e){}t&&V(t,{fromSession:!0,config:i,hook:o,logger:s})}({DEBUG_KEY:t,config:n,hook:r,logger:o}),n.getConfig("debugging",(e=>{let{debugging:i}=e;return function(e){let t,{getStorage:n=()=>window.sessionStorage,DEBUG_KEY:r,config:i,hook:o,logger:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e){try{t=n()}catch(e){s.logError("sessionStorage is not available: debugging configuration will not persist on page reload",e)}null!=t&&function(e){let{sessionStorage:t=window.sessionStorage,DEBUG_KEY:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.enabled){e.intercept&&((e=I(e)).intercept=J.serializeConfig(e.intercept));try{t.setItem(n,JSON.stringify(e))}catch(e){}}else try{t.removeItem(n)}catch(e){}}(e,{sessionStorage:t,DEBUG_KEY:r}),e.enabled?V(e,{config:i,hook:o,logger:s}):function(e){let{hook:t,logger:n}=e;J.updateConfig({}),X(!1),W({hook:t}),Q&&(Q=!1,n.logMessage("Debug overrides disabled"))}({hook:o,logger:s})}}(i,{DEBUG_KEY:t,config:n,hook:r,logger:o})}),{init:!0})}window._pbjsGlobals.forEach((e=>{window[e]&&!0===window[e]._installDebugging&&(window[e]._installDebugging=te)}))})();