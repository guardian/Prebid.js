(()=>{"use strict";function e(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}const t=1,n="auctionDebug",r="TRUE"===((i=window.location.search,i?i.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,r]=t.split("=");return/\[\]$/.test(n)?(n=n.replace("[]",""),e[n]=e[n]||[],e[n].push(r)):e[n]=r||"",e}),{}):{}).pbjs_debug||"").toUpperCase();var i;const o="random",s={};s[o]=!0,s.fixed=!0;const c=o,a={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},d=function(){let t,n,i,o=[],d=null;function u(){function e(e){return d[e].val}function o(e,t){d[e].val=t}t={};const d={publisherDomain:{set(e){null!=e&&k("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),o("publisherDomain",e)}},priceGranularity:{val:a.MEDIUM,set(e){f(e)&&("string"==typeof e?o("priceGranularity",l(e)?e:a.MEDIUM):$(e)&&(o("customPriceBucket",e),o("priceGranularity",a.CUSTOM),E("Using custom price granularity")))}},customPriceBucket:{val:{},set(){}},mediaTypePriceGranularity:{val:{},set(t){null!=t&&o("mediaTypePriceGranularity",Object.keys(t).reduce(((n,r)=>(f(t[r])?"string"==typeof t?n[r]=l(t[r])?t[r]:e("priceGranularity"):$(t)&&(n[r]=t[r],E(`Using custom price granularity for ${r}`)):k(`Invalid price granularity for media type: ${r}`),n)),{}))}},bidderSequence:{val:c,set(e){s[e]?o("bidderSequence",e):k(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{val:{},set(e){(function(e){if(!$(e))return k("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return k(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!U(e[t]))return k(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(S))return k(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!R(e[t],p))return k(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&o("auctionOptions",e)}}};let u={debug:r,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3};function l(e){return n=t=>e===a[t],(t=Object.keys(a))&&t.find(n,undefined);var t,n}function f(e){if(!e)return A("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)l(e)||k("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if($(e)&&!function(e){if(t=e,!(t&&(U(t)||S(t)?t.length>0:!(Object.keys(t).length<=0))&&e.buckets&&Array.isArray(e.buckets)))return!1;var t;let n=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(n=!1)})),n}(e))return A("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(u,Object.fromEntries(Object.entries(d).map((t=>{let[n,r]=t;return[n,Object.assign({get:e.bind(null,n),set:o.bind(null,n),enumerable:!0},r)]})))),n&&m(Object.keys(n).reduce(((e,t)=>(n[t]!==u[t]&&(e[t]=u[t]||{}),e)),{})),n=u,i={}}function l(){if(d&&i&&$(i[d])){let e=i[d];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(n).concat(Object.keys(e)))).reduce(((t,r)=>(void 0===e[r]?t[r]=n[r]:void 0===n[r]?t[r]=e[r]:$(e[r])?t[r]="customPriceBucket"===r?Object.assign({},n[r],e[r]):x({},n[r],e[r]):t[r]=e[r],t)),{})}return Object.assign({},n)}const[f,g]=[l,function(){const e=l();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((t=>function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){const n=arguments.length<=0?void 0:arguments[0];return n?e(t(),n):l()}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e="*",n=t||{}),"function"!=typeof r)return void A("listener must be a function");const i={topic:e,callback:r};return o.push(i),n.init&&r("*"===e?g():{[e]:g(e)}),function(){o.splice(o.indexOf(i),1)}}(...arguments)})),[b,h]=[g,f].map((e=>function(){let t=e(...arguments);return t&&"object"==typeof t&&(t=I(t)),t}));function y(e){if(!$(e))return void A("setConfig options must be an object");let r=Object.keys(e),i={};r.forEach((r=>{let o=e[r];$(t[r])&&$(o)&&(o=Object.assign({},t[r],o));try{i[r]=n[r]=o}catch(e){k(`Cannot set config for property ${r} : `,e)}})),m(i)}function m(e){const t=Object.keys(e);o.filter((e=>{return n=t,r=e.topic,n&&n.includes(r,undefined)||!1;var n,r})).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),o.filter((e=>"*"===e.topic)).forEach((t=>t.callback(e)))}function v(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!$(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!$(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((n=>{i[n]||(i[n]={}),Object.keys(e.config).forEach((r=>{let o=e.config[r];if($(o)){const e=t?x:Object.assign;i[n][r]=e({},i[n][r]||{},o)}else i[n][r]=o}))}))}catch(e){A(e)}}function w(e,t){d=e;try{return t()}finally{j()}}function j(){d=null}return u(),{getCurrentBidder:function(){return d},resetBidder:j,getConfig:g,getAnyConfig:f,readConfig:b,readAnyConfig:h,setConfig:y,mergeConfig:function(e){if(!$(e))return void A("mergeConfig input must be an object");const t=x(l(),e);return y({...t}),t},setDefaults:function(e){$(t)?(Object.assign(t,e),Object.assign(n,e)):A("defaults must be an object")},resetConfig:u,runWithBidder:w,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return w(e,t.bind(this,...r))}k("config.callbackWithBidder callback is not a function")}}},setBidderConfig:v,getBidderConfig:function(){return i},mergeBidderConfig:function(e){return v(e,!0)}}}();function u(e){var t,n,r;if(Array.isArray(e)){for(n=Array(t=e.length);t--;)n[t]=(r=e[t])&&"object"==typeof r?u(r):r;return n}if("[object Object]"===Object.prototype.toString.call(e)){for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:u(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=(r=e[t])&&"object"==typeof r?u(r):r;return n}return e}const l=window,f=l.pbjs=l.pbjs||{};f.cmd=f.cmd||[],f.que=f.que||[],l===window&&(l._pbjsGlobals=l._pbjsGlobals||[],l._pbjsGlobals.push("pbjs"));var g="String",b="Object",p="Boolean",h=Object.prototype.toString;let y,m=Boolean(window.console),v=Boolean(m&&window.console.log),w=(Boolean(m&&window.console.info),Boolean(m&&window.console.warn)),j=Boolean(m&&window.console.error);function O(){null!=y&&y(...arguments)}function E(){C()&&v&&console.log.apply(console,B(arguments,"MESSAGE:"))}function k(){C()&&w&&console.warn.apply(console,B(arguments,"WARNING:")),O(n,{type:"WARNING",arguments})}function A(){C()&&j&&console.error.apply(console,B(arguments,"ERROR:")),O(n,{type:"ERROR",arguments})}function B(e,t){e=[].slice.call(e);let n=d.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?`%c${n}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function C(){return!!d.getConfig("debug")}function R(e,t){return h.call(e)==="[object "+t+"]"}function S(e){return R(e,g)}const U=Array.isArray.bind(Array);function $(e){return R(e,b)}function I(e){return u(e)||{}}function D(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let n=0;return function(){n++,n===t&&e.apply(this,arguments)}}function P(e,t){let{checkTypes:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||n&&e.constructor!==t.constructor)return!1;{const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let i of r){if(!t.hasOwnProperty(i))return!1;if(!P(e[i],t[i],{checkTypes:n}))return!1}return!0}}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if($(e)&&$(i))for(const t in i)$(i[t])?(e[t]||Object.assign(e,{[t]:{}}),x(e[t],i[t])):U(i[t])?e[t]?U(e[t])&&i[t].forEach((n=>{let r=1;for(let i=0;i<e[t].length;i++)if(P(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,{[t]:[...i[t]]}):Object.assign(e,{[t]:i[t]});return x(e,...n)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n in e){const r=e[n],i=typeof r;if(void 0===r||"function"===i||"symbol"===i||r instanceof RegExp||r instanceof Map||r instanceof Set||r instanceof Date||null!==r&&"object"===i&&r.hasOwnProperty("toJSON"))return!0;if(null!==r&&"object"===i&&r.constructor===Object){if(t.has(r))return!0;if(t.add(r),_(r,t))return!0}}return!1}function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};({setTimeout:this.setTimeout=window.setTimeout.bind(window)}=e),this.logger=e.logger,this.rules=[]}let q,T;function M(e,t){let{hook:n,logger:r}=t;q=z.bind({overrides:e,logger:r}),n.get("addBidResponse").before(q,5),T=H.bind({overrides:e,logger:r}),n.get("addBidderRequests").before(T,5)}function N(e){let{hook:t}=e;t.get("addBidResponse").getHooks({hook:q}).remove(),t.get("addBidderRequests").getHooks({hook:T}).remove()}function W(e,t,n){return!(!e.bidder||e.bidder===t)||!(!e.adUnitCode||e.adUnitCode===n)}function K(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function Y(e,t,n,r){return Object.keys(e).filter((e=>-1===["adUnitCode","bidder"].indexOf(e))).reduce((function(t,i){return r.logMessage(`bidder overrides changed '${t.adUnitCode}/${t.bidderCode}' ${n}.${i} from '${t[i]}.js' to '${e[i]}'`),t[i]=e[i],t.isDebug=!0,t}),t)}function z(e,t,n,r){const{overrides:i,logger:o}=this;K(i.bidders,n.bidderCode)?o.logWarn(`bidder '${n.bidderCode}' excluded from auction by bidder overrides`):(Array.isArray(i.bids)&&i.bids.forEach((function(e){W(e,n.bidderCode,t)||Y(e,n,"bidder",o)})),e(t,n,r))}function H(e,t){const{overrides:n,logger:r}=this,i=t.filter((function(e){return!K(n.bidders,e.bidderCode)||(r.logWarn(`bidRequest '${e.bidderCode}' excluded from auction by bidder overrides`),!1)}));Array.isArray(n.bidRequests)&&i.forEach((function(e){n.bidRequests.forEach((function(t){e.bids.forEach((function(n){W(t,e.bidderCode,n.adUnitCode)||Y(t,n,"bidRequest",r)}))}))})),e(i)}Number.isInteger.bind(Number),Object.assign(G.prototype,{DEFAULT_RULE_OPTIONS:{delay:0},serializeConfig(t){return t.filter(((t,n)=>{const r=!_(t);return r||e(t,"options.suppressWarnings")||this.logger.logWarn(`Bid interceptor rule definition #${n+1} contains non-serializable properties and will be lost after a refresh. Rule definition: `,t),r}))},updateConfig(e){this.rules=(e.intercept||[]).map(((e,t)=>this.rule(e,t+1)))},rule(e,t){return{no:t,match:this.matcher(e.when,t),replace:this.replacer(e.then,t),options:Object.assign({},this.DEFAULT_RULE_OPTIONS,e.options),paapi:this.paapiReplacer(e.paapi||[],t)}},matcher(e,t){if("function"==typeof e)return e;if("object"!=typeof e)return this.logger.logError(`Invalid 'when' definition for debug bid interceptor (in rule #${t})`),()=>!1;function n(t,r){let{ref:i=e,args:o=[]}=r;return Object.entries(i).map((e=>{let[r,i]=e;const s=t[r];return i instanceof RegExp?null!=i.exec(s):"function"==typeof i?!!i(s,...o):"object"==typeof i?n(s,{ref:i,args:o}):s===i})).every((e=>e))}return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n(e,{args:r})}},replacer(e,t){var n=this;if(null===e)return()=>null;let r;return"function"==typeof(e=e||{})?r=t=>{let{args:n}=t;return e(...n)}:"object"!=typeof e?(this.logger.logError(`Invalid 'then' definition for debug bid interceptor (in rule #${t})`),r=()=>({})):r=t=>{let{args:n,ref:i=e}=t;const o=Array.isArray(i)?[]:{};return Object.entries(i).forEach((e=>{let[t,i]=e;o[t]="function"==typeof i?i(...n):null!=i&&"object"==typeof i?r({args:n,ref:i}):i})),o},function(e){const t=n.responseDefaults(e);for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return x(t,r({args:[e,...o]})),t.hasOwnProperty("ad")||t.hasOwnProperty("adUrl")||(t.ad=n.defaultAd(e,t)),t.isDebug=!0,t}},paapiReplacer(e,t){function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.keys(e).some((e=>!["config","igb"].includes(e)))?{config:e}:e))}return Array.isArray(e)?()=>n(e):"function"==typeof e?function(){return n(e(...arguments))}:void this.logger.logError(`Invalid 'paapi' definition for debug bid interceptor (in rule #${t})`)},responseDefaults:e=>({requestId:e.bidId,cpm:3.5764,currency:"EUR",width:300,height:250,ttl:360,creativeId:"mock-creative-id",netRevenue:!1,meta:{}}),defaultAd:(e,t)=>`<html><head><style>#ad {width: ${t.width}px;height: ${t.height}px;background-color: #f6f6ae;color: #85144b;padding: 5px;text-align: center;display: flex;flex-direction: column;align-items: center;justify-content: center;}#bidder {font-family: monospace;font-weight: normal;}#title {font-size: x-large;font-weight: bold;margin-bottom: 5px;}#body {font-size: large;margin-top: 5px;}</style></head><body><div id="ad"><div id="title">Mock ad: <span id="bidder">${e.bidder}</span></div><div id="body">${t.width}x${t.height}</div></div></body></html>`,match(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.rules.find((t=>t.match(e,...n)))},matchAll(e,t){const[n,r]=[[],[]];return e.forEach((e=>{const i=this.match(e,t);null!=i?n.push({rule:i,bid:e}):r.push(e)})),[n,r]},intercept(e){let{bids:t,bidRequest:n,addBid:r,addPaapiConfig:i,done:o}=e;null==t&&(t=n.bids);const[s,c]=this.matchAll(t,n);if(s.length>0){const e=D(o,s.length);s.forEach((t=>{const o=t.rule.replace(t.bid,n),s=t.rule.paapi(t.bid,n),c=t.rule.options.delay;this.logger.logMessage(`Intercepted bid request (matching rule #${t.rule.no}), mocking response in ${c}ms. Request, response, PAAPI configs:`,t.bid,o,s),this.setTimeout((()=>{o&&r(o,t.bid),s.forEach((e=>i(e,t.bid,n))),e()}),c)})),n=I(n),t=n.bids=c}else this.setTimeout(o,0);return{bids:t,bidRequest:n}}});const L=[];let F,J=!1;function Q(e,t){let{fromSession:n=!1,config:r,hook:i,logger:o}=t;r.setConfig({debug:!0}),F.updateConfig(e),V(!0),N({hook:i}),M(e,{hook:i,logger:o}),J||(J=!0,o.logMessage("Debug overrides enabled"+(n?" from session":"")))}function V(e){L.forEach((e=>{let[t,n]=e;t().getHooks({hook:n}).remove()})),e&&L.forEach((e=>{let[t,n]=e;t().before(n)}))}function X(e,t){const n=function(){return F.intercept(...arguments)};L.push([e,function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,n,...i)}])}function Z(e,t,n,r,i,o,s,c){const a=D(c.onCompletion,2);({bids:r,bidRequest:i}=t({bids:r,bidRequest:i,addBid:c.onBid,addPaapiConfig:(e,t)=>c.onPaapi({bidId:t.bidId,...e}),done:a})),0===r.length?a():e(n,r,i,o,s,{...c,onCompletion:a})}function ee(e){let{DEBUG_KEY:n,config:r,hook:i,createBid:o,logger:s}=e;F=new G({logger:s});const c=function(e){let{createBid:n}=e;return function(e,r,i,o,s,c){let a,{onResponse:d,onError:u,onBid:l,onFledge:f}=c;const g=D((()=>d(...a)),o.length+1);function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a=t,g()}function p(e,r){l({adUnit:r.adUnitCode,bid:Object.assign(n(t,r),e)})}if((o=o.map((e=>r({bidRequest:e,addBid:p,addPaapiConfig(e,t,n){f({adUnitCode:t.adUnitCode,ortb2:n.ortb2,ortb2Imp:t.ortb2Imp,...e})},done:g}).bidRequest)).filter((e=>e.bids.length>0))).length>0){const t=new Set;o.forEach((e=>e.bids.forEach((e=>t.add(e.bidId))))),(i=I(i)).ad_units.forEach((e=>{e.bids=e.bids.filter((e=>t.has(e.bid_id)))})),i.ad_units=i.ad_units.filter((e=>e.bids.length>0)),e(i,o,s,{onResponse:b,onError:u,onBid:l})}else b(!0,[])}}({createBid:o});X((()=>i.get("processBidderRequests")),Z),X((()=>i.get("processPBSRequest")),c),function(e){let t,{DEBUG_KEY:n,storage:r,config:i,hook:o,logger:s}=e;try{r=r||window.sessionStorage,t=JSON.parse(r.getItem(n))}catch(e){}t&&Q(t,{fromSession:!0,config:i,hook:o,logger:s})}({DEBUG_KEY:n,config:r,hook:i,logger:s}),r.getConfig("debugging",(e=>{let{debugging:t}=e;return function(e){let t,{getStorage:n=()=>window.sessionStorage,DEBUG_KEY:r,config:i,hook:o,logger:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e){try{t=n()}catch(e){s.logError("sessionStorage is not available: debugging configuration will not persist on page reload",e)}null!=t&&function(e){let{sessionStorage:t=window.sessionStorage,DEBUG_KEY:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.enabled){e.intercept&&((e=I(e)).intercept=F.serializeConfig(e.intercept));try{t.setItem(n,JSON.stringify(e))}catch(e){}}else try{t.removeItem(n)}catch(e){}}(e,{sessionStorage:t,DEBUG_KEY:r}),e.enabled?Q(e,{config:i,hook:o,logger:s}):function(e){let{hook:t,logger:n}=e;F.updateConfig({}),V(!1),N({hook:t}),J&&(J=!1,n.logMessage("Debug overrides disabled"))}({hook:o,logger:s})}}(t,{DEBUG_KEY:n,config:r,hook:i,logger:s})}),{init:!0})}window._pbjsGlobals.forEach((e=>{window[e]&&!0===window[e]._installDebugging&&(window[e]._installDebugging=ee)}))})();