(self.pbjsChunk=self.pbjsChunk||[]).push([[81],{664:(n,e,t)=>{var o=t(8676),s=t(1218),i=t(3172),a=t(9581),r=t(2649),c=t(7260),d=t(7173),u=t(2159),l=t(4438),p=t(1053);let f,g,m,C,b,v,M=!1,y=!1;const A={iab:function(n){let{onSuccess:e,onError:t,onEvent:o}=n;const i=(0,l.c5)({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});if(!i)return t("TCF2 CMP not found.");i.isDirect?(0,s.fH)("Detected CMP API is directly accessible, calling it now..."):(0,s.fH)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now...");i({command:"addEventListener",callback:function(n,i){(0,s.fH)("Received a response from CMP",n),i?(o(n),!1!==n.gdprApplies&&"tcloaded"!==n.eventStatus&&"useractioncomplete"!==n.eventStatus||P(n,{onSuccess:e,onError:t})):t("CMP unable to register callback function.  Please check CMP setup.")}})},static:function(n){let{onSuccess:e,onError:t}=n;P(C,{onSuccess:e,onError:t})}};function S(n){let e,t,o=!1,s=null,i=!1;function a(n){null!=s&&clearTimeout(s),o||null==n||(0===n?e():s=setTimeout(e,n))}function d(e,t,s){if(a(null),o=!0,r.mW.setConsentData(e),"function"==typeof n){for(var i=arguments.length,c=new Array(i>3?i-3:0),d=3;d<i;d++)c[d-3]=arguments[d];n(t,s,...c)}}if(!(0,c.mK)(Object.keys(A),f))return void d(null,!1,`CMP framework (${f}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);const u={onSuccess:n=>d(n,!1),onError:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];d(null,!0,n,...t)},onEvent:function(n){t=n,i||(i=!0,null!=b&&a(b))}};e=()=>{const n=n=>{d(n,!1,(i?"Timeout waiting for user action on CMP":"CMP did not load")+", continuing auction...")};P(t,{onSuccess:n,onError:()=>n(h(void 0))})},A[f](u),null!=b&&i||a(g)}const E=(0,p.R)("gdpr",(()=>v),S);function P(n,e){let{onSuccess:t,onError:o}=e;!function(){const e=n&&"boolean"==typeof n.gdprApplies?n.gdprApplies:m,t=n&&n.tcString;return!("boolean"==typeof e&&(!0!==e||t&&(0,s.O8)(t)))}()?t(h(n)):o("CMP returned unexpected value during lookup process.",n)}function h(n){return v={consentString:n?n.tcString:void 0,vendorData:n||void 0,gdprApplies:n&&"boolean"==typeof n.gdprApplies?n.gdprApplies:m},n&&n.addtlConsent&&(0,s.O8)(n.addtlConsent)&&(v.addtlConsent=n.addtlConsent),v.apiVersion=2,v}a.$W.getConfig("consentManagement",(n=>function(n){(n=n&&(n.gdpr||n.usp||n.gpp?n.gdpr:n))&&"object"==typeof n?((0,s.O8)(n.cmpApi)?f=n.cmpApi:(f="iab",(0,s.fH)("consentManagement config did not specify cmp.  Using system default setting (iab).")),(0,s.Et)(n.timeout)?g=n.timeout:(g=1e4,(0,s.fH)("consentManagement config did not specify timeout.  Using system default setting (10000).")),b=(0,s.Et)(n.actionTimeout)?n.actionTimeout:null,m=!0===n.defaultGdprScope,M=!!n.dsaPlatform,(0,s.fH)("consentManagement module has been activated..."),"static"===f&&((0,s.Qd)(n.consentData)?(C=n.consentData,null!=C?.getTCData&&(C=C.getTCData),g=0):(0,s.vV)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),y||(0,o.m)().requestBids.before(E,50),y=!0,r.mW.enable(),S()):(0,s.JE)("consentManagement (gdpr) config not defined, exiting consent manager")}(n.consentManagement))),u.w.before((function(n,e){return n(e.then((n=>{const e=r.mW.getConsentData();return e&&("boolean"==typeof e.gdprApplies&&(0,i.J)(n,"regs.ext.gdpr",e.gdprApplies?1:0),(0,i.J)(n,"user.ext.consent",e.consentString)),M&&(0,i.J)(n,"regs.ext.dsa.dsarequired",3),n})))})),(0,d.pS)({type:d.S3,name:"gdprAddtlConsent",fn:function(n,e){const t=e.gdprConsent?.addtlConsent;t&&"string"==typeof t&&(0,i.J)(n,"user.ext.ConsentedProvidersSettings.consented_providers",t)}}),(0,o.E)("consentManagementTcf"),(0,o.E)("consentManagementTcf")}},n=>{n.O(0,[802,109,10,85],(()=>{return e=664,n(n.s=e);var e}));n.O()}]);