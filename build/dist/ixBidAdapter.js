(self.pbjsChunk=self.pbjsChunk||[]).push([[170],{3273:(e,t,i)=>{var n=i(8676),r=i(433),a=i(1218),o=i(3172),d=i(8018),s=i(9581),p=i(2707),l=i(7260),c=i(6028),u=i(6972),m=i(5768),f=i(8707);const g="ix",b=[d.D4,d.G_,d.s6],x=[144,144],h={JPY:1},y="p",v="x",I={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},A={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},w=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],C=["mimes","minduration","maxduration"],O=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],U=`${g}_features`,E=(0,p.vM)({bidderCode:g}),S={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return(0,r.A)(this.featureToggles,`features.${e}.activated`,!1)},getFeatureToggles:function(){if(E.localStorageIsEnabled()){const e=(0,a.$l)(E.getDataFromLocalStorage(U));(0,r.A)(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){const t=e.body,i=new Date,n=(0,r.A)(t,"ext.features");n&&(this.featureToggles={expiry:i.setHours(i.getHours()+1),features:n},E.localStorageIsEnabled()&&E.setDataInLocalStorage(U,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},E.localStorageIsEnabled()&&E.removeDataFromLocalStorage(U)}};let T=0,D="",P="",J=!1;const _=2;function k(e){const t=F(e,d.G_),i=(0,r.A)(e,"mediaTypes.video"),n=(0,r.A)(e,"params.video");if($(i,n).length)return{};t.video=n?(0,a.Go)(e.params.video):{};let s=(0,r.A)(e,"ortb2Imp.ext.tid");s&&(0,o.J)(t,"ext.tid",s),function(e,t){if((0,r.A)(t,"mediaTypes.video.context")===u.H6){let i=(0,r.A)(t,"mediaTypes.video.renderer");if(i||(i=(0,r.A)(t,"renderer")),(0,r.A)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(i&&"object"==typeof i){if(void 0!==i.url){let t="";try{t=new URL(i.url).hostname}catch{return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=i.url}}else e.displaymanager="ix"}}(t,e),W(t,e);for(const e in i)-1===O.indexOf(e)||t.video.hasOwnProperty(e)||(t.video[e]=i[e]);if(t.video.minduration>t.video.maxduration)return(0,a.vV)(`IX Bid Adapter: video minduration [${t.video.minduration}] cannot be greater than video maxduration [${t.video.maxduration}]`),{};const p=n&&n.context||i&&i.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!(0,a.Fq)(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&((0,a.JE)(`IX Bid Adapter: video.plcmt [${e.video.plcmt}] must be an integer between 1-4 inclusive`),delete e.video.plcmt)}(t),p&&!t.video.hasOwnProperty("placement")&&(p===u.mn?t.video.placement=1:p===u.H6?(0,r.A)(n,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,J=!0):(0,a.JE)(`IX Bid Adapter: Video context '${p}' is not supported`)),!t.video.w||!t.video.h){const i=X((0,r.A)(t,"video.playerSize"))||X((0,r.A)(e,"params.size"));if(!i)return(0,a.JE)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=i[0],t.video.h=i[1]}return j(e,t,d.G_),t}function F(e,t){const i={};if(i.id=e.bidId,re()&&(0,r.A)(e,"params.externalId")&&(0,o.J)(i,"ext.externalID",e.params.externalId),(0,r.A)(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case d.D4:(0,o.J)(i,"ext.siteID",e.params.banner.siteId.toString());break;case d.G_:(0,o.J)(i,"ext.siteID",e.params.video.siteId.toString());break;case d.s6:(0,o.J)(i,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,o.J)(i,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(0,o.J)(i,"ext.sid",String(e.params.id)),i}function j(e,t,i){let n=null,r=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(n={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,a.fp)(e.getFloor)){let n="*",o="*";if(i&&(0,a.gR)(b,i)){const{w:e,h:r}=t[i];n=i,o=[e,r]}try{r=e.getFloor({mediaType:n,size:o})}catch(e){(0,a.JE)("priceFloors module call getFloor failed, error : ",e)}}let s=!1;r?(t.bidfloor=r.floor,t.bidfloorcur=r.currency,(0,o.J)(t,"ext.fl",y),s=!0):n&&(t.bidfloor=n.floor,t.bidfloorcur=n.currency,(0,o.J)(t,"ext.fl",v),s=!0),s&&(i==d.D4?((0,o.J)(t,"banner.ext.bidfloor",t.bidfloor),(0,o.J)(t,"banner.ext.fl",t.ext.fl)):i==d.G_?((0,o.J)(t,"video.ext.bidfloor",t.bidfloor),(0,o.J)(t,"video.ext.fl",t.ext.fl)):((0,o.J)(t,"native.ext.bidfloor",t.bidfloor),(0,o.J)(t,"native.ext.fl",t.ext.fl)))}function B(e,t,i){const n={},o=!(!(0,r.A)(e,"exp")||!(0,a.Fq)(e.exp)),s=(0,r.A)(e,"dealid")||(0,r.A)(e,"ext.dealid");h.hasOwnProperty(t)?n.cpm=e.price/h[t]:n.cpm=e.price/100,n.requestId=e.impid,s&&(n.dealId=s),n.netRevenue=true,n.currency=t,n.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=_||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(n.vastUrl=e.ext.vasturl):n.vastXml=e.adm;let p=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{p=JSON.parse(e.adm)}catch(e){(0,a.JE)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==_?(n.width=i.video.w,n.height=i.video.h,n.mediaType=d.G_,n.mediaTypes=i.mediaTypes,n.ttl=o?e.exp:3600):p&&p.native?(n.native={ortb:p.native},n.width=e.w?e.w:1,n.height=e.h?e.h:1,n.mediaType=d.s6,n.ttl=o?e.exp:3600):(n.ad=e.adm,n.width=e.w,n.height=e.h,n.mediaType=d.D4,n.ttl=o?e.exp:300),n.meta={},n.meta.networkId=(0,r.A)(e,"ext.dspid"),n.meta.brandId=(0,r.A)(e,"ext.advbrandid"),n.meta.brandName=(0,r.A)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(n.meta.advertiserDomains=e.adomain),e.ext?.dsa&&(n.meta.dsa=e.ext.dsa),n}function z(e){return Array.isArray(e)&&2===e.length&&(0,a.Fq)(e[0])&&(0,a.Fq)(e[1])}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(z(e))return e[0]===t[0]&&e[1]===t[1];for(let i=0;i<e.length;i++)if(e[i][0]===t[0]&&e[i][1]===t[1])return!0;return!1}function $(e,t){const i=[];e||(0,a.JE)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(let n of C){const r=e&&e.hasOwnProperty(n),a=t&&t.hasOwnProperty(n);r||a||i.push(`IX Bid Adapter: ${n} is not included in either the adunit or params level`)}const n=e&&e.hasOwnProperty("protocol"),r=e&&e.hasOwnProperty("protocols"),o=t&&t.hasOwnProperty("protocol"),d=t&&t.hasOwnProperty("protocols");return n||r||o||d||i.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),i}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return z(e)?e:!!z(e[0])&&e[0]}function q(e,t,i){if(!e)return;return{...(0,l.I6)(i,(t=>t.bidId===e)),...(0,l.I6)(t,(t=>t.id===e))}}function G(e,t,i,n){let d="https://htlb.casalemedia.com/openrtb/pbjs",p=function(e){let t=[],i={};if((0,a.cy)(e))for(const n of e){const e=A.hasOwnProperty(n.source);if((0,r.A)(n,"uids.0")&&(i[n.source]=!0,e&&""!==A[n.source]&&(n.uids[0].ext={rtiPartner:A[n.source]}),t.push(n),t.length>=50))break}return{toSend:t,seenSources:i}}((0,r.A)(e,"0.userIdAsEids")),l=p.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){let i=window.headertag.getIdentityInfo();if(i&&"object"==typeof i)for(const n in i){if(e.length>=50)return;if(i.hasOwnProperty(n)){let r=i[n];!r.responsePending&&r.data&&"object"==typeof r.data&&Object.keys(r.data).length&&!t.seenSources[r.data.source]&&e.push(r.data)}}}(l,p);const c=[];let u=function(e){const t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=E.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);u=function(e,t){t.length>0&&(e.ext.features={},t.forEach((t=>{e.ext.features[t]={activated:S.isFeatureEnabled(t)}})));return e}(u,S.REQUESTED_FEATURE_TOGGLES);let m=function(e,t){var i=e.map((e=>e.adUnitCode)).filter(((e,t,i)=>i.indexOf(e)===t));let n=(0,r.A)(e,"0.userIdAsEids",[]),a={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.27.0",userIds:M(e[0]),url:window.location.href.split("?")[0],vpd:J,ae:t,eidLength:n.length};for(let t of i){let i=e.filter((e=>e.adUnitCode===t))[0];(0,r.A)(i,"mediaTypes")&&(Object.keys(i.mediaTypes).length>1&&a.mfu++,(0,r.A)(i,"mediaTypes.native")&&a.nu++,(0,r.A)(i,"mediaTypes.banner")&&a.bu++,"outstream"===(0,r.A)(i,"mediaTypes.video.context")&&(a.ou++,ne(i)&&(a.ren=!0)),"instream"===(0,r.A)(i,"mediaTypes.video.context")&&a.iu++,a.allu++)}return a}(e,(0,r.A)(t,"paapi.enabled"));for(let e in m)u.ext.ixdiag[e]=m[e];u=function(e,t,i,n,a){const o=(0,r.A)(t,"timeout");o&&(e.ext.ixdiag.tmax=o);s.$W.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=s.$W.getConfig("userSync").syncsPerBidder);e.ext.ixdiag.imps=Object.keys(i).length,e.source={tid:t?.ortb2?.source?.tid},n[0].schain&&(e.source.ext={},e.source.ext.schain=n[0].schain);a.length>0&&(e.user={},e.user.eids=a);document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer);return e}(u,t,i,e,l),u=function(e,t){if(t){t.gdprConsent&&(D=t.gdprConsent,D.hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:D.gdprApplies?1:0}}),D.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:D.consentString||""},D.hasOwnProperty("addtlConsent")&&D.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:D.addtlConsent}))),t.uspConsent&&((0,o.J)(e,"regs.ext.us_privacy",t.uspConsent),P=t.uspConsent);const i=(0,r.A)(t,"refererInfo.page");i&&(e.site.page=i),t.gppConsent&&((0,o.J)(e,"regs.gpp",t.gppConsent.gppString),(0,o.J)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}s.$W.getConfig("coppa")&&(0,o.J)(e,"regs.coppa",1);return e}(u,t);let f={};e[0].params.siteId&&(T=e[0].params.siteId,f.s=T);const g=Object.keys(i);let b=!1;for(let n=0;n<g.length&&!(c.length>=4);n++){u=L(i,g,u,n);const o=(0,r.A)(t,"ortb2")||{},p={...o.site||o.context};p.page=N(t);const l={...o.user};(0,a.Im)(o)||b||(u=V(t,u,o,p,l),u.site=(0,a.D9)({},u.site,p),u.user=(0,a.D9)({},u.user,l),b=!0),u=H(i,u,g,n,f,d);const m=n===g.length-1;if(u=le(u),u=de(u),u=se(u),u=de(u),u=se(u),m){let t=`${d}?`;0!==T&&(t+=`s=${T}`),re()&&(t+=0!==T?"&":"",t+=`p=${s.$W.getConfig("exchangeId")}`),c.push({method:"POST",url:t,data:(0,a.Go)(u),options:{contentType:"text/plain",withCredentials:!0},validBidRequests:e}),u.imp=[],b=!1}}return c}function L(e,t,i,n){const s=e[t[n]],{missingImps:p=[],ixImps:l=[]}=s,c={ixImps:l,missingBannerImpressions:p},u=Object.keys(c).map((e=>c[e])).filter((e=>Array.isArray(e))).reduce(((e,t)=>e.concat(...t)),[]),m=e[t[n]].gpid,f=e[t[n]].dfp_ad_unit_code,g=e[t[n]].tid,b=e[t[n]].sid,x=e[t[n]].ae,h=e[t[n]].paapi,y=u.filter((e=>d.D4 in e)),v=u.filter((e=>!(d.D4 in e)));if(y.length>0){const d=y.reduce(((e,t)=>(e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e)),{});for(const s in d){const p=d[s],{id:l,banner:{topframe:c}}=p[0];let u=(0,r.A)(p[0],"ext.externalID");const y={id:l,banner:{topframe:c,format:p.map((e=>{let{banner:{w:t,h:i},ext:n}=e;return{w:t,h:i,ext:n}}))}};for(let e=0;e<y.banner.format.length;e++)null!=y.banner.format[e].ext&&(null!=y.banner.format[e].ext.sid&&delete y.banner.format[e].ext.sid,null!=y.banner.format[e].ext.externalID&&delete y.banner.format[e].ext.externalID),"bidfloor"in p[e]&&(y.banner.format[e].ext.bidfloor=p[e].bidfloor),"{}"===JSON.stringify(y.banner.format[e].ext)&&delete y.banner.format[e].ext;const v=e[t[n]].pos;(0,a.Fq)(v)&&(y.banner.pos=v),(f||m||g||b||x||u||h)&&(y.ext={},y.ext.dfp_ad_unit_code=f,y.ext.gpid=m,y.ext.tid=g,y.ext.sid=b,y.ext.externalID=u,1==x&&(y.ext.ae=1,y.ext.paapi=h)),"bidfloor"in p[0]&&(y.bidfloor=p[0].bidfloor),"bidfloorcur"in p[0]&&(y.bidfloorcur=p[0].bidfloorcur);const I=e[t[n]].adUnitFPD;I&&(0,o.J)(y,"ext.data",I),i.imp.push(y)}}return v.length>0&&v.forEach((e=>{if(m&&(0,o.J)(e,"ext.gpid",m),i.imp.length>0){let t=!1;i.imp.forEach(((n,a)=>{e.id===n.id&&d.G_ in e?(n.video=e.video,n.video.ext=Object.assign({},e.video.ext,e.ext),(0,r.A)(n,"video.ext.bidfloor",!1)&&(0,r.A)(n,"bidfloor",!1)&&n.video.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.video.ext.bidfloor),!(0,r.A)(n,"ext.siteID",!1)&&(0,r.A)(e,"video.ext.siteID")&&((0,o.J)(n,"ext.siteID",e.video.ext.siteID),(0,o.J)(i,"ext.ixdiag.usid",!0)),t=!0):e.id===n.id&&d.s6 in e&&(n.native=e.native,n.native.ext=Object.assign({},e.native.ext,e.ext),(0,r.A)(n,"native.ext.bidfloor",!1)&&(0,r.A)(n,"bidfloor",!1)&&n.native.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.native.ext.bidfloor),!(0,r.A)(n,"ext.siteID",!1)&&(0,r.A)(e,"native.ext.siteID",!1)&&((0,o.J)(n,"ext.siteID",e.native.ext.siteID),(0,o.J)(i,"ext.ixdiag.usid",!0)),t=!0)})),t||i.imp.push(e)}else i.imp.push(e)})),i}function N(e){const t=e&&e.bidderCode||"ix",i=s.$W.getConfig(t);let n="";if(n=(0,r.A)(e,"ortb2.site.page")?e.ortb2.site.page:(0,r.A)(e,"refererInfo.page"),i&&"object"==typeof i.firstPartyData){return function(e,t,i){let n;try{n=new URL(t)}catch(i){(0,a.JE)(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),n=new URL((0,r.A)(e,"refererInfo.page"))}const o=new URLSearchParams(n.search);for(const[e,t]of Object.entries(i))o.has(e)||o.append(e,t);return n.search=o.toString(),n.toString()}(e,n,i.firstPartyData)}return n}function V(e,t,i,n,r){if(t.ext.ixdiag.fpd=!0,Object.keys(n).forEach((e=>{-1===I.SITE.indexOf(e)&&delete n[e]})),Object.keys(r).forEach((e=>{-1===I.USER.indexOf(e)&&delete r[e]})),i.device){const e={...i.device.sua};(0,a.Im)(e)||(0,o.J)(t,"device.sua",e)}if(i.hasOwnProperty("regs")&&!e.gppConsent&&(i.regs.hasOwnProperty("gpp")&&"string"==typeof i.regs.gpp&&(0,o.J)(t,"regs.gpp",i.regs.gpp),i.regs.hasOwnProperty("gpp_sid")&&Array.isArray(i.regs.gpp_sid)&&(0,o.J)(t,"regs.gpp_sid",i.regs.gpp_sid),i.regs.ext?.dsa)){const e=i.regs.ext.dsa,n={};if(["dsarequired","pubrender","datatopub"].forEach((t=>{(0,a.Et)(e[t])&&(n[t]=e[t])})),(0,a.cy)(e.transparency)){const t=[];e.transparency.forEach((e=>{(0,a.Qd)(e)&&(0,a.O8)(e.domain)&&""!=e.domain&&(0,a.cy)(e.dsaparams)&&e.dsaparams.every((e=>(0,a.Et)(e)))&&t.push(e)})),t.length>0&&(n.transparency=t)}(0,a.Im)(n)||(0,o.J)(t,"regs.ext.dsa",n)}return t}function W(e,t){const i=(0,r.A)(t,"ortb2Imp.ext.data");i&&(0,o.J)(e,"ext.data",i)}function H(e,t,i,n,r,a){const o=e[i[n]].pbadslot,d=e[i[n]].tagId,s=e[i[n]].adUnitCode,p=e[i[n]].divId;return(o||d||s||p)&&(t.ext.ixdiag.pbadslot=o,t.ext.ixdiag.tagid=d,t.ext.ixdiag.adunitcode=s,t.ext.ixdiag.divId=p),t}function M(e){const t=e.userId||{};return w.filter((e=>t[e]))}function Q(e,t){if(t)for(let i=0;i<e.length;i++){const n=e[i];if(t[0]===n[0]&&t[1]===n[1]){e.splice(i,1);break}}}function Y(e,t){const i=function(e){const t=F(e,d.s6),i=e.nativeOrtbRequest;i.eventtrackers=[{event:1,methods:[1,2]}],i.privacy=1,t.native={request:JSON.stringify(i),ver:"1.2"};let n=(0,r.A)(e,"ortb2Imp.ext.tid");return n&&(0,o.J)(t,"ext.tid",n),W(t,e),j(e,t,d.s6),t}(e);if(0!=Object.keys(i).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(i),t[e.adUnitCode].gpid=(0,r.A)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,r.A)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,r.A)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,r.A)(e,"params.tagId");const n=e.adUnitCode,a=document.getElementById(n)?n:(0,f.p)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=a}}function Z(e,t){const i=k(e);if(0!=Object.keys(i).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(i),t[e.adUnitCode].gpid=(0,r.A)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,r.A)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,r.A)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,r.A)(e,"params.tagId");const n=e.adUnitCode,a=document.getElementById(n)?n:(0,f.p)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=a}}function K(e,t,i,n){let o=function(e){const t=F(e,d.D4);t.banner={},t.adunitCode=e.adUnitCode;const i=(0,r.A)(e,"params.size");return i&&(t.banner.w=i[0],t.banner.h=i[1]),t.banner.topframe=(0,a.al)()?0:1,j(e,t,d.D4),t}(e);const s=R((0,r.A)(e,"mediaTypes.banner.sizes"),(0,r.A)(e,"params.size"));i.hasOwnProperty(e.adUnitCode)||(i[e.adUnitCode]={}),i[e.adUnitCode].gpid=(0,r.A)(e,"ortb2Imp.ext.gpid"),i[e.adUnitCode].dfp_ad_unit_code=(0,r.A)(e,"ortb2Imp.ext.data.adserver.adslot"),i[e.adUnitCode].tid=(0,r.A)(e,"ortb2Imp.ext.tid"),i[e.adUnitCode].pbadslot=(0,r.A)(e,"ortb2Imp.ext.data.pbadslot"),i[e.adUnitCode].tagId=(0,r.A)(e,"params.tagId"),i[e.adUnitCode].pos=(0,r.A)(e,"mediaTypes.banner.pos");if((0,r.A)(n,"paapi.enabled")){const t=(0,r.A)(e,"ortb2Imp.ext.ae"),n=(0,r.A)(e,"ortb2Imp.ext.paapi");n&&(i[e.adUnitCode].paapi=n),t&&((0,a.Fq)(t)?i[e.adUnitCode].ae=t:(0,a.JE)("error setting auction environment flag - must be an integer"))}const p=(0,r.A)(e,"ortb2Imp.ext.data");p&&(i[e.adUnitCode].adUnitFPD=p);const l=(0,r.A)(e,"params.id");!l||"string"!=typeof l&&"number"!=typeof l||(i[e.adUnitCode].sid=String(l));const c=e.adUnitCode,u=document.getElementById(c)?c:(0,f.p)(c).divId;i[e.adUnitCode].adUnitCode=c,i[e.adUnitCode].divId=u,s&&(i[e.adUnitCode].hasOwnProperty("ixImps")||(i[e.adUnitCode].ixImps=[]),i[e.adUnitCode].ixImps.push(o)),function(e,t,i){if(t.hasOwnProperty(e.adUnitCode)){let i=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(i=t[e.adUnitCode].missingSizes),Q(i,e.params.size),t[e.adUnitCode].missingSizes=i}else if((0,r.A)(e,"mediaTypes.banner.sizes")){let n=(0,a.Go)(e.mediaTypes.banner.sizes);Q(n,e.params.size);let r={missingSizes:n,impression:i};t[e.adUnitCode]=r}}(e,t,o)}function ee(e,t,i){const n=(0,a.Go)(t);return n.banner.w=i[0],n.banner.h=i[1],j(e,n,d.D4),n}function te(e){e.renderer.push((function(){const t=e.adUnitCode,i=document.getElementById(t)?t:(0,f.p)(t).divId;i?window.createIXPlayer(i,e):(0,a.JE)(`IX Bid Adapter: adUnitCode: ${i} not found on page.`)}))}function ie(e,t){const i=m.A4.install({id:e,url:t,loaded:!1});try{i.setRender(te)}catch(e){return(0,a.JE)("Prebid Error calling setRender on renderer",e),null}return t?i:((0,a.JE)("Outstream renderer URL not found"),null)}function ne(e){if("outstream"!==(0,r.A)(e,"mediaTypes.video.context"))return!1;let t=(0,r.A)(e,"mediaTypes.video.renderer");t||(t=(0,r.A)(e,"renderer"));return!!("object"!=typeof t||!t.url||!t.render)||t.backupOnly}function re(){let e=s.$W.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}const ae={code:g,gvlid:10,supportedMediaTypes:b,isBidRequestValid:function(e){const t=(0,r.A)(e,"params.video"),i=(0,r.A)(e,"params.size"),n=(0,r.A)(e,"mediaTypes.banner.sizes"),o=(0,r.A)(e,"mediaTypes.video"),d=(0,r.A)(e,"mediaTypes.video.playerSize"),s=e.params.hasOwnProperty("bidFloor"),p=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,a.gR)(b,e.mediaType))return(0,a.JE)("IX Bid Adapter: media type is not supported."),!1;if((0,r.A)(e,"mediaTypes.banner")&&!n)return!1;if(i){const t=X(i);if(!t)return(0,a.vV)("IX Bid Adapter: size has invalid format."),!1;if(!R(e.sizes,t)&&!R(d,t)&&!R(n,t))return(0,a.vV)("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!re()&&null==e.params.siteId)return(0,a.vV)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,a.vV)("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,a.vV)("IX Bid Adapter: siteId must valid value"),!1}if((s||p)&&!(s&&p&&(l=e.params.bidFloor,c=e.params.bidFloorCur,Boolean("number"==typeof l&&"string"==typeof c&&c.match(/^[A-Z]{3}$/)))))return(0,a.vV)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1;var l,c;if(o&&t){const i=k(e).video,n=$(o,t);if((0,r.A)(e,"mediaTypes.video.context")===u.H6&&ne(e)&&i){const e=[(0,r.A)(i,"w"),(0,r.A)(i,"h")];if(!(e[0]>=x[0]&&e[1]>=x[1]))return(0,a.vV)(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(n.length)return n.forEach((e=>{(0,a.vV)(e)})),!1}return function(e){return void 0===(0,r.A)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){T=0},buildRequests:function(e,t){const i=[],n={},o={},s={},p={};S.getFeatureToggles(),e.forEach((e=>{const i=Object.keys((0,r.A)(e,"mediaTypes",{}));for(const r in i)switch(i[r]){case d.D4:K(e,p,n,t);break;case d.G_:Z(e,o);break;case d.s6:Y(e,s);break;default:(0,a.JE)(`IX Bid Adapter: ad unit mediaTypes ${r} is not supported`)}}));for(let t in p)if(p.hasOwnProperty(t)){let i=p[t].missingSizes;n.hasOwnProperty(t)||(n[t]={}),n[t].hasOwnProperty("missingImps")||(n[t].missingImps=[],n[t].missingCount=0);let r=p[t].impression;for(let a=0;a<i.length;a++){let o=ee(e[0],r,i[a]);n[t].missingImps.push(o),n[t].missingCount++}}let l=[];return Object.keys(n).length>0&&l.push(n),Object.keys(o).length>0&&l.push(o),Object.keys(s).length>0&&l.push(s),S.isFeatureEnabled("pbjs_enable_multiformat")?i.push(...G(e,t,function(e){const t={};return e.forEach((e=>{Object.keys(e).forEach((i=>{Object.keys(t).includes(i)?t[i].hasOwnProperty("ixImps")&&e[i].hasOwnProperty("ixImps")?t[i].ixImps=[...t[i].ixImps,...e[i].ixImps]:t[i].hasOwnProperty("missingImps")&&e[i].hasOwnProperty("missingImps")?t[i].missingImps=[...t[i].missingImps,...e[i].missingImps]:e[i].hasOwnProperty("ixImps")?t[i].ixImps=e[i].ixImps:e[i].hasOwnProperty("missingImps")&&(t[i].missingImps=e[i].missingImps):t[i]=e[i]}))})),t}(l))):(Object.keys(n).length>0&&i.push(...G(e,t,n)),Object.keys(o).length>0&&i.push(...G(e,t,o)),Object.keys(s).length>0&&i.push(...G(e,t,s))),i},interpretResponse:function(e,t){const i=[];let n=null,o=(0,r.A)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(S.setFeatureToggles(e),!e.hasOwnProperty("body"))return i;const s=e.body,p=s.seatbid||[];for(let e=0;e<p.length;e++){if(!p[e].hasOwnProperty("bid"))continue;const o=p[e].bid,l=t.data;for(let e=0;e<o.length;e++){const a=q(o[e].impid,l.imp,t.validBidRequests);if(n=B(o[e],s.cur,a),n.mediaType===d.G_&&ne(a)){const t=(0,r.A)(s,"ext.videoplayerurl");if(n.renderer=ie(o[e].bidId,t),!n.renderer)continue}i.push(n)}if((0,r.A)(l,"ext.ixdiag.err")&&E.localStorageIsEnabled())try{E.removeDataFromLocalStorage("ixdiag")}catch(e){(0,a.vV)("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(o)&&o.length>0))return i;o=o.filter((e=>!!function(e){return"object"==typeof e&&null!==e}(e)||((0,a.JE)("Malformed auction config detected:",e),!1)));try{return{bids:i,paapi:o}}catch(e){return(0,a.JE)("Error attaching AuctionConfigs",e),i}},getUserSyncs:function(e,t){const i=[];let n=null;if(t.length>0&&(n=(0,r.A)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==n&&0==n)return[];if(e.iframeEnabled)i.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{let e=null;s.$W.getConfig("userSync")&&(e=s.$W.getConfig("userSync").syncsPerBidder),0===e&&(e=n),e=n&&(0===e||e)?n>e?e:n:1;for(let t=0;t<e;t++)i.push({type:"image",url:oe(e,t)})}return i}};function oe(e,t){let i="",n="0";return D&&D.hasOwnProperty("gdprApplies")&&(n=D.gdprApplies?"1":"0"),D&&D.hasOwnProperty("consentString")&&(i=D.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==T?"&site_id="+T.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+n+"&gdpr_consent="+i+"&us_privacy="+(P||"")}function de(e){return e.imp.forEach(((t,i)=>{const n=t.ext;if(null==n)return e;pe(t)<2||Object.keys(n).forEach((r=>{if(d.D4 in t){const a=t.banner.ext;if(void 0!==a&&void 0!==a[r]&&a[r]==n[r]&&delete e.imp[i].banner.ext[r],void 0!==t.banner.format)for(let a=0;a<t.banner.format.length;a++)null!=t.banner.format[a].ext&&null!=t.banner.format[a].ext[r]&&t.banner.format[a].ext[r]==n[r]&&delete e.imp[i].banner.format[a].ext[r]}if(d.G_ in t){const a=t.video.ext;void 0!==a&&void 0!==a[r]&&a[r]==n[r]&&delete e.imp[i].video.ext[r]}if(d.s6 in t){const a=t.native.ext;void 0!==a&&void 0!==a[r]&&a[r]==n[r]&&delete e.imp[i].native.ext[r]}}))})),e}function se(e){return e.imp.forEach(((t,i)=>{if(null==t.ext)return e;if(!(pe(t)<2)){if(d.D4 in t){const n=t.banner.ext;if(void 0!==n&&void 0!==n.siteID&&delete e.imp[i].banner.ext.siteID,void 0!==t.banner.format)for(let n=0;n<t.banner.format.length;n++)void 0!==t.banner.format[n].ext&&void 0!==t.banner.format[n].ext.siteID&&((0,o.J)(e.imp[i],"ext.siteID",t.banner.format[n].ext.siteID),(0,o.J)(e,"ext.ixdiag.usid",!0),delete e.imp[i].banner.format[n].ext.siteID)}if(d.G_ in t){const n=t.video.ext;void 0!==n&&void 0!==n.siteID&&delete e.imp[i].video.ext.siteID}if(d.s6 in t){const n=t.native.ext;void 0!==n&&void 0!==n.siteID&&delete e.imp[i].native.ext.siteID}}})),e}function pe(e){let t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function le(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(0,c.a$)(ae),(0,n.E)("ixBidAdapter"),(0,n.E)("ixBidAdapter")}},e=>{e.O(0,[5,802,85],(()=>{return t=3273,e(e.s=t);var t}));e.O()}]);