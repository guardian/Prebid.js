(self.pbjsChunk=self.pbjsChunk||[]).push([[401],{1360:(e,t,n)=>{var r=n(8676),s=n(1218),i=n(433),d=n(8937),o=n(6028),a=n(5768),c=n(8018),p=n(9581),l=n(2707);const u="grid",g="https://grid.bidswitch.net/hbjson",m="https://x.bidswitch.net/sync?ssp=themediagrid",b="tmguid",f="https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",h=(0,l.vM)({bidderCode:u}),y="Bid from response has no adid parameter - ",x="Bid from response has no adm parameter - ",v="Array of bid objects is empty",S="Seatbid array from response has empty item",w="Response is empty",A="Response has empty seatbid array",I="Seatbid from response has no array of bid objects - ",R={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}};let j=!1;const O={code:u,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[c.D4,c.G_],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;let n=null,r=null,d=null,o=null,a=null,l=null,u=null,m=!1,{bidderRequestId:f,gdprConsent:y,uspConsent:x,timeout:v,refererInfo:S,gppConsent:w}=t||{};const A=S?encodeURIComponent(S.page):"",I=parseInt(v)||null,j=[],O={},k=[],E=[],_=[];e.forEach((e=>{const i={bid:e,savedPrebidBid:null};if(!e.params.uid&&!e.params.secid)return;f||(f=e.bidderRequestId),d||(d=e.schain),o||(o=e.userIdAsEids),u||(u=R[e.bidder]&&R[e.bidder].endpoint);const{params:a,mediaTypes:p,bidId:l,adUnitCode:g,rtd:b,ortb2Imp:h}=e,{defaultParams:y}=R[e.bidder]||{},{secid:x,pubid:v,source:S,uid:w,keywords:D,forceBidder:N,multiRequest:B,content:C,video:T}={...y,...a},P=function(e,t){const n=e.video?"video":"banner";let r=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){const e=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((e=>{let[t,n]=e;return{w:t,h:n}}))});"object"!=typeof e||"USD"!==e.currency||isNaN(parseFloat(e.floor))||(r=Math.max(r,parseFloat(e.floor)))}return r}(p||{},e),q=b&&b.jwplayer&&b.jwplayer.targeting;q&&!r&&q.content&&(r=q.content);let M={id:l.toString(),tagid:(x||w).toString(),ext:{divid:g.toString()}};if(h&&(h.instl&&(M.instl=parseInt(h.instl)||null),h.ext&&(M.ext.gpid=h.ext.gpid?.toString()||h.ext.data?.pbadslot?.toString()||h.ext.data?.adserver?.adslot?.toString(),h.ext.data&&(M.ext.data=h.ext.data))),(0,s.Im)(D)||(n||(n=D),M.ext.bidder={keywords:D}),P&&(M.bidfloor=P),!p||p[c.D4]){const t=function(e,t){const n=t.sizes||e.sizes;if(!n||!n.length)return;let r=n.map((e=>(0,s.nX)(e))),i=(0,s.nX)(n[0]);r.length&&(i.format=r);return i}(e,p?p[c.D4]:{});t&&(M.banner=t)}if(p&&p[c.G_]){const t=function(e,t,n){const{mind:r,maxd:i,size:d,playerSize:o,protocols:a,durationRangeSec:c=[],...p}={...t,...e};if(d&&(0,s.O8)(d)){const e=d.split("x");2===e.length&&parseInt(e[0])&&parseInt(e[1])&&(p.w=parseInt(e[0]),p.h=parseInt(e[1]))}if(!p.w||!p.h){const e=((o||n||[]).toString().match(/^\d+,\d+/)||[])[0],t=e&&e.split(",").map((e=>parseInt(e)));t&&2===t.length&&Object.assign(p,(0,s.nX)(t))}if(!p.w||!p.h)return;const l=r||c[0]||parseInt(p.minduration)||null,u=i||c[1]||parseInt(p.maxduration)||null;l&&(p.minduration=l);u&&(p.maxduration=u);a&&a.length&&(p.protocols=a);return p}(T,p[c.G_],e.sizes);t&&(M.video=t)}if(M.banner||M.video)if(B){const n={tid:t?.ortb2?.source?.tid?.toString?.(),ext:{wrapper:"Prebid_js",wrapper_version:"8.52.0-10"}};e.schain&&(n.ext.schain=e.schain);const r={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:A},tmax:I,source:n,imp:[M]};v&&(r.site.publisher={id:v});const s=C||q&&q.content;s&&(r.site.content=s),k.push(r),E.push(S),_.push(i)}else O[l]=i,j.push(M);!m&&N&&R[N]&&(m=N)})),m=p.$W.getConfig("forceBidderName")||m,m&&R[m]&&(u=R[m].endpoint,this.forceBidderName=m);const D={tid:t?.ortb2?.source?.tid?.toString?.(),ext:{wrapper:"Prebid_js",wrapper_version:"8.52.0-10"}};d&&(D.ext.schain=d);const N=j.length||!k.length?{id:f&&f.toString(),site:{page:A},tmax:I,source:D,imp:j}:null;return r&&(N.site.content=r),[...k,N].forEach((e=>{if(!e)return;a=null;const r=(0,i.A)(t,"ortb2.user.data");r&&r.length&&(a={data:[...r]}),y&&y.consentString&&(l={consent:y.consentString});const d=(0,i.A)(t,"ortb2.user.ext.device");d&&(l=l||{},l.device={...d}),o&&o.length&&(l=l||{},l.eids=[...o]),l&&Object.keys(l).length&&(a=a||{},a.ext=l);const c=h.getDataFromLocalStorage(b)||function(){if(p.$W.getConfig("localStorageWriteAllowed")){const e=(0,s.lk)().replace(/-/g,"");return h.setDataInLocalStorage(b,e),e}return null}();c&&(a=a||{},a.id=c.toString()),a&&(e.user=a);const u=(0,i.A)(t,"ortb2.user.keywords")||null,g=(0,i.A)(t,"ortb2.site.keywords")||null;u&&(n=n||{},n.user=n.user||{},n.user.ortb2=[{name:"keywords",keywords:u.split(",")}]),g&&(n=n||{},n.site=n.site||{},n.site.ortb2=[{name:"keywords",keywords:g.split(",")}]),n&&(n=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];if(r)if("site"===n||"user"===n){const e={};Object.keys(r).forEach((t=>{if(Array.isArray(r[t])){const n=[];r[t].forEach((e=>{if("object"==typeof e&&e.name){const t={name:e.name,segments:[]};Object.keys(e).forEach((n=>{Array.isArray(e[n])&&e[n].forEach((e=>{e&&("string"==typeof e?t.segments.push({name:n,value:e}):"segments"===n&&"string"==typeof e.name&&"string"==typeof e.value&&t.segments.push(e))}))})),t.segments.length&&n.push(t)}})),n.length&&(e[t]=n)}})),t[n]=e}else t[n]=r})),Object.keys(t).length&&t}(n),n&&(e.ext={keywords:n})),y&&y.gdprApplies&&(e.regs={ext:{gdpr:y.gdprApplies?1:0}});const m=(0,i.A)(t,"ortb2.regs")||{};if(w||m?.gpp){const t={gpp:w?.gppString??m?.gpp,gpp_sid:w?.applicableSections??m?.gpp_sid};e.regs=(0,s.D9)(e?.regs??{},t)}x&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=x),!0===p.$W.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1),m?.ext?.dsa&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.dsa=m.ext.dsa);const f=(0,i.A)(t,"ortb2.site");if(f){const t=[...f.cat||[],...f.pagecat||[]].filter((e=>e&&"string"==typeof e));t.length&&(e.site.cat=t);const n=(0,i.A)(f,"content.genre");n&&"string"==typeof n&&(e.site.content={...e.site.content,genre:n});const r=(0,i.A)(f,"content.data");if(r&&r.length){const t=e.site.content||{};e.site.content=(0,s.D9)(t,{data:r})}const d=(0,i.A)(f,"content.id");d&&(e.site.content={...e.site.content,id:d})}})),[...k.map(((e,t)=>{let n;const r=(u||g).replace(/[?&]sp=([^?&=]+)/,((e,t)=>(t&&(n=t),"")));let s=E[t]||n;return{method:"POST",url:r+(r.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(s?`&sp=${s}`:""),data:JSON.stringify(e),bidObject:_[t]}})),...N?[{method:"POST",url:u||g,data:JSON.stringify(N),bidsMap:O}]:[]]},interpretResponse:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.A4;e=e&&e.body;const r=[];let i;e?e.seatbid&&!e.seatbid.length&&(i=A):i=w;const d=this.forceBidderName||this.code;return!i&&e.seatbid&&e.seatbid.forEach((e=>{!function(e,t,n,r,i){if(!e)return;let d;e.adid||(d=y+JSON.stringify(e));if(d||e.adm||e.nurl){const d=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,{bid:o,savedPrebidBid:a}=d||{};if(o&&function(e,t){if((0,s.Et)(t))return e>t||e===t&&Math.random()>.5;return!0}(e.price,a&&a.cpm)){const t={requestId:o.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};d.savedPrebidBid=t,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(t.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},t.meta.demandSource=e.ext.bidder.grid.demandSource),e.ext&&e.ext.dsa&&(t.meta.dsa=e.ext.dsa),"video"===e.content_type?(e.adm?(t.vastXml=e.adm,t.adResponse={content:t.vastXml}):e.nurl&&(t.vastUrl=e.nurl),t.mediaType=c.G_,o.renderer||o.mediaTypes&&o.mediaTypes.video&&"outstream"!==o.mediaTypes.video.context||(t.renderer=function(e,t,n){const r=n.install({id:t.id,url:t.url,loaded:!1});try{r.setRender(k)}catch(e){(0,s.JE)("Prebid Error calling setRender on renderer",e)}return r}(0,{id:o.bidId,url:f},r))):(t.ad=e.adm,t.mediaType=c.D4);const a=R[i]&&R[i].bidResponseExternal||{};n.push((0,s.D9)(t,a))}}else d=x+JSON.stringify(e);d&&(0,s.vV)(d)}(function(e){e?e.bid?e.bid[0]||(0,s.vV)(v):(0,s.vV)(I+JSON.stringify(e)):(0,s.vV)(S);return e&&e.bid&&e.bid[0]}(e),t,r,n,d)})),i&&(0,s.vV)(i),r},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,,s,i]=t;if(!j&&r.pixelEnabled){let e="";s&&("boolean"==typeof s.gdprApplies&&(e+=`&gdpr=${Number(s.gdprApplies)}`),"string"==typeof s.consentString&&(e+=`&gdpr_consent=${s.consentString}`)),i&&(e+=`&us_privacy=${i}`);const t=this.forceBidderName||this.code,n=R[t]&&R[t].syncurl||m;return j=!0,{type:"image",url:n+e}}},ajaxCall:function(e,t,n,r){return r.browsingTopics=!1,(0,d.RD)(e,t,n,r)},onDataDeletionRequest:function(e){O.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function k(e){e.renderer.push((()=>{window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}(0,o.a$)(O),(0,r.E)("gridBidAdapter"),(0,r.E)("gridBidAdapter")}},e=>{e.O(0,[802,85],(()=>{return t=1360,e(e.s=t);var t}));e.O()}]);